#!/usr/bin/python
"""
Stateful Web App Browsing with Mechanize for SPSE lect 4.5
[Mechanize]
- handles cookies by itself
"""

import mechanize

br = mechanize.Browser()
br.open('http://student.securitytube.net/login/index.php')

br.select_form(nr=0)
br.form['username'] = 'spse-1813'
br.form['password'] = 'PASSWORD'

br.submit()

#for link in br.links():
#    print link.url + ':' + link.text

new_link = br.click_link(text='moodle[IMG]Change password')
br.open(new_link)
#print br.response().read()

for form in br.forms():
    print form
